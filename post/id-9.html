<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1">
		<meta name="description" content="本文由我于2020年7月在IT天空撰写的一篇相同话题的帖子扩充而成，主要介绍了 WTG（Windows To Go）的运行机制、制作方法、使用技巧等，具有较高参考价值。">
		<title>WTG 制作使用相关知识总览 - 秋月夏茗的笔记本</title>
		<link rel="stylesheet" href="/css/main.css">
		<link rel="stylesheet" href="/css/post.css">
		<link rel="icon" href="/img/favicon.png">
	</head>
	<body>
		<header>
			<img src="/img/avatar.png" alt="站点头像">
			<h1>秋月夏茗的笔记本</h1>
			<div>千江有水千江月 万里无云万里天</div>
		</header>
		<nav>
			<a href="/">首页</a>
			<a href="/arch/">存档</a>
			<a href="/about/">关于</a>
			<a href="/link/">友链</a>
		</nav>
		<main>
			<h2>WTG 制作使用相关知识总览</h2>
			<div id="post-sign">2021年3月28日 由 秋月夏茗</div>
			<article>
				<h3>基本知识</h3>
				<p>WTG，全称 <strong>W</strong>indows <strong>T</strong>o <strong>G</strong>o，是由微软首先推出的一项可移动操作系统技术。WTG 可简单理解为安装系统时将系统文件与引导文件都存放在可移动磁盘而非本地硬盘，使可移动磁盘成为不依赖本地硬盘的独立系统盘，从而实现在不同设备上使用同一系统的目的。WTG 这项技术理论上可在 WinXP、Win7、Win8、Win8.1、Win10、Win11 的所有版本上运行，但系统内置的 WTG 制作工具是从 Win7850（Win8）出现、至 Win19041（Win10）移除。</p>
				<h3>主要用途和优点</h3>
				<p>WTG 有随走随用的特点。如果需要在多个地点使用自己的系统，并且不方便携带电脑，在每个地点都有闲置电脑的前提下，WTG 是很好的选择。WTG 使用便捷，只需携带一个可移动设备；WTG 与常规系统的架构和操作较为类似，便于新手适应，软件兼容性问题较少，<strong>某些情况下可以代替常规系统</strong>；WTG 的扩展性比较强，可以在同一个可移动设备中与 PE 共存；WTG 的设备兼容性较好，甚至是英特尔平台的 Mac 电脑也可运行。</p>
				<h3>缺点与不足</h3>
				<p>WTG 有少许限制，如不允许大版本更新、不允许休眠、不支持 WinRE、不支持重置等（不过有一些解决办法）；WTG 相比常规系统更容易崩溃，偶尔会造成数据损坏；如果未屏蔽本机硬盘，WTG 中杀毒软件或其他软件的运行可能会破坏宿主机的系统（比如我就这么破坏过学校机房的电脑）；频繁长时间使用 WTG 会造成可移动磁盘寿命减短；WTG 在 USB2 端口运行时速度较慢；WTG 在新设备启动后偶尔会有驱动问题，导致分辨率不正常、电脑没有声音等，这时需要手动补充驱动；微软目前已经宣布停止对 WTG 的支持，所以未来可能发现的重大 WTG 系统适配问题也不会得到解决。</p>
				<h3>磁盘的选择</h3>
				<p>制作 WTG 首先要准备一个符合制作要求的可移动磁盘。WTG 启动与运行时需要像常规系统一样，在可移动磁盘上进行大量的小文件读写，因此，购买时不仅要考虑顺序读写速度，也需衡量 4K 读写速度（一项衡量小文件读写速度的指标）。此外，还需注意容量（必须装得下系统文件和其他必需文件）、散热（关系到 WTG 运行的稳定性以及磁盘寿命）、传输协议（通常要求 USB3）、闪存类别（通常要求 MLC，如果价格太高 TLC 也可）和主控质量（主要包括碎片回收能力、支持的扩展功能等，以保证 WTG 长期运行稳定高效）。对于 WTG，固态U盘是不错的选择。</p>
				<h4>固态U盘</h4>
				<p>固态U盘意为采用固态硬盘主控的U盘（并非固态闪存），速度比一般U盘快得多，并且具有出色的稳定性和碎片回收能力。从便携性、价格、性能上综合考虑，固态U盘最适合 WTG。当然固态移动硬盘也可，但普通U盘和机械移动硬盘较不适合。</p>
				<h4>SLC/MLC/TLC/QLC</h4>
				<p>这是最常见的四种U盘闪存颗粒层级类型，依次称为单层存储单元、双层存储单元、三层存储单元、四层存储单元。从左向右，性能依次降低，单位体积内容量依次升高，成本依次降低，寿命依次降低。最适合 WTG 的U盘闪存是 MLC。</p>
				<h3>制作过程</h3>
				<p>WTG 的制作过程基本与常规系统安装相符，可以直接使用微软自带的 WTG 工具，但此工具功能少且某些版本中不可用。网络上也有人编写了一些专门的 WTG 制作工具，个人认为其中最优秀的是萝卜头 IT 论坛推出的 <a href="https://bbs.luobotou.org/thread-761-1-1.html" target="_blank" rel="noopener">WTG 辅助工具</a>。制作时，需注意以下参数：</p>
				<h4>MBR/GPT</h4>
				<p>WTG 类似于常规系统，MBR/GPT 两种方式都能安装。如果需要使用的电脑中有的干脆不支持 UEFI 启动方式，那么只能选择 MBR 格式；如果这些电脑都支持 UEFI，那么两种格式均可，但 GPT 格式的启动速度较快且扩展性较好。</p>
				<h4>传统/虚拟硬盘</h4>
				<p>这是两种不同的运行机制，虚拟磁盘的原理是模拟真实硬盘，如果有频繁备份、映像隔离测试、运行大型软件等特殊需求，那么可以选择；否则应使用生态更优、系统支持性更好、不易出错的传统模式。另注意：若识别为可移动磁盘，只能使用虚拟磁盘模式。</p>
				<h4>UASP</h4>
				<p>UASP 是一种传输协议，旨在提高读写速度，只有部分设备支持 UASP。如果启用 UASP，运行于 USB3 的速度会比较快，但运行于 USB2 的速度会比正常速度慢；如果禁用 USAP 或设备不支持 UASP，运行于 USB3 的速度会比较慢，但运行于 USB2 的速度正常。应根据实际情况决定是否禁用 UASP。</p>
				<h4>屏蔽本机硬盘</h4>
				<p>常规系统环境下，Windows 默认会联机全部硬盘；但如果在 WTG 中这么做，WTG 中的某些软件——以杀毒软件为首——会对宿主机硬盘内的文件进行破坏，严重的会导致宿主机系统无法启动。勾选屏蔽主机硬盘后，一个注册表值会被更改，这使 WTG 系统只加载系统盘所在硬盘，而不加载其他硬盘，有效保护了无关硬盘内的文件。</p>
				<h4>很杂的注意事项</h4>
				<p>尽量不要使用 BitLocker，出错概率极高。</p>
				<p>Win10 1809 中有一个系统问题，这会导致 WTG 首次启动蓝屏，<a href="https://www.yrxitong.com/h-nd-290.html" target="_blank" rel="noopener">解决方法点此</a>。</p>
				<p>制作时间因电脑和移动盘的性能而异，通常在一分钟至几十分钟不等。如果超过了四十分钟仍未完成，说明此磁盘不适合制作 WTG，应更换之。</p>
				<p>若磁盘空间较大可以在制作完成后分一下区，分区方法与常规系统相同。</p>
				<h3>启动与使用</h3>
				<p>WTG 的启动方法类似于 PE，先将 WTG 所在磁盘插入要使用的电脑的 USB 接口（最好是 USB3 接口），然后打开电脑，与此同时按下此电脑主板对应的启动选择快捷键（通常为 F12、Delete 等），在启动选择界面操作上下方向键，移动光标至可移动磁盘对应的启动项（如果这个项没有出现，检查一下引导兼容性并重新拔插 USB 接头，或尝试重新制作），最后按下回车即可。首次使用时，会进入 OOBE 模式并指引完成系统配置，然后就可以正常安装软件、做优化、使用了。</p>
				<p>WTG 中尽量不要安装大型软件、游戏等，最好准备一些驱动工具，以免系统更新不能补充所有驱动。WTG 的硬件是不断变化的，所以某些靠识别硬件来区分设备的软件的激活（甚至是 Windows 的数字激活）都会在更换设备后失效。</p>
				<h3>维护与备份</h3>
				<p>在 WTG 运行过程中，应注意不要拔掉可移动磁盘，否则易造成数据损坏，必须在彻底关机后在拔除。通常情况下运行 WTG 时磁盘会发热，这属于正常现象，应注意合理散热，避免突然断电。为保证运行速度和磁盘寿命，应该尽量减少 WTG 中软件数量（尤其是后台运行的软件）。</p>
				<p>对于 WTG，定期备份非常重要。备份 WTG 的方法很简单，通常使用 WIM、ESD 等对 WTG 的系统盘进行备份，也可使用 WTG 辅助工具进行 FFU（微软推出的一种整个磁盘备份格式，功能类似于 Ghost，但不会有容错性差的问题）备份。虚拟磁盘也可进行差分备份，节省存储空间。</p>
			</article>
		</main>
	</body>
</html>